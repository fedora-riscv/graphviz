diff -up graphviz-2.28.0/lib/dotgen/dotsplines.c.dot-crash-fix graphviz-2.28.0/lib/dotgen/dotsplines.c
--- graphviz-2.28.0/lib/dotgen/dotsplines.c.dot-crash-fix	2011-02-05 19:19:45.000000000 -0500
+++ graphviz-2.28.0/lib/dotgen/dotsplines.c	2013-09-02 07:48:27.160523116 -0400
@@ -897,6 +897,7 @@ makeSimpleFlatLabels (node_t* tn, node_t
     ctrx = (leftend + rightend)/2.0;
     
     /* do first edge */
+    e = earray[0];
     pointn = 0;
     points[pointn++] = tp;
     points[pointn++] = tp;
@@ -917,7 +918,7 @@ makeSimpleFlatLabels (node_t* tn, node_t
     umaxx = ctrx + (ED_label(e)->dimen.x)/2.0;
 
     for (i = 1; i < n_lbls; i++) {
-	e = edges[ind + i];
+	e = earray[i];
 	if (i%2) {  /* down */
 	    if (i == 1) {
 		lminx = ctrx - (ED_label(e)->dimen.x)/2.0;
@@ -975,7 +976,7 @@ makeSimpleFlatLabels (node_t* tn, node_t
 
     /* edges with no labels */
     for (; i < cnt; i++) {
-	e = edges[ind + i];
+	e = earray[i];
 	if (i%2) {  /* down */
 	    if (i == 1) {
 		lminx = (2*leftend + rightend)/3.0;
